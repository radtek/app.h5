!function(){"use strict";var r={version:1},a={},c={},u=navigator.userAgent.toLowerCase(),f=~u.indexOf("iphone");u.indexOf("android");function l(n){return"[object Function]"===Object.prototype.toString.call(n)}var s="JSBridge";function n(n,e){var i=n.split(".");if(1!==i.length){var t=i.shift(),o=void 0;if("on"!==t)for(o||(o=r[t]||(r[t]={}),t=i.shift());t;)o[t]?o=o[t]:o[t]=0===i.length?e:o={},t=i.shift();else a[i.join(".")]=e}else r[i[0]]=e}function v(n,e,i){2===arguments.length&&l(e)&&(i=e,e=null);var t,o=void 0;i&&(c[(t=n,o="cb_"+t+"_"+(new Date).getTime())]=i),e=e?JSON.stringify(e):"",o=o||"",!function(){if(!f)return!1;var n=u.match(/os [\d._]+/gi)[0];return 7<(n=(n=(n+"").replace(/[^0-9|_.]/gi,"")).split("_")[0])}()?window[s].invoke(n,e,o):window.webkit.messageHandlers[s].postMessage({action:n,data:e,callbackid:o})}var i=!1;var e="device.getLocation";n(e,function(n){return v(e,n)});var t="device.getNetworkType";n(t,function(n){return v(t,n)});var o="device.makePhoneCall";n(o,function(n){return v(o,{number:n})});var d="device.scan";n(d,function(n){return v(d,n)});var w="ui.alert";n(w,function(n,e){i?alert(JSON.stringify({title:n,msg:e})):v(w,{title:n,msg:e})});var g="ui.confirm";n(g,function(n,e,i){v(g,{title:n,msg:e},i)});var p="ui.prompt";n(p,function(n,e){n.title=n.title||"",n.msg=n.msg||"",n.placeholder=n.placeholder||"",v(p,n,e)});var m="ui.showToast",h="ui.hideToast";n(m,function(n){v(m,{msg:n})}),n(h,function(){v(h)});var b="ui.showLoading",S="ui.hideLoading";n(b,function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3;v(b,{content:n=n||"",delay:e})}),n(S,function(){v(S)});var y="view.close";n(y,function(){v(y)});var J="view.back";n(J,function(){v(J)});var O="view.forward";n(O,function(){v(O)});var k="view.fullScreen";n(k,function(){v(k)});var T="view.goto";n(T,function(n){n.title=n.title||"",n.url=n.url||"",v(T,n)});var A="view.showOptionMenu",N="view.hideOptionMenu";n(A,function(){v(A)}),n(N,function(){v(N)});var x="view.changeTitle",_="view.onTitleClick";n(x,function(n){v(x,{title:n})}),n(_,function(n){v(_,n)});var M="image.choose";n(M,function(n,e,i){l(n)?(i=n,n=9,e=["camera","album"]):(n=!n||9<n?9:Math.abs(n),l(e)?(i=e,e=["camera","album"]):e=e||["camera","album"]),v(M,{count:n,sourceType:e},i)});var j,C="video.choose";n(C,function(n,e){var i=n.count,t=n.sourceType,o=n.camera;i=!i||9<i?9:Math.abs(i),v(C,{count:i,sourceType:t=t||["camera","album"],camera:o=o||["front","back"]},e)}),j=r,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return j}):define.cmd&&define(function(n,e,i){i.exports=j})),r.invoke=function(n,e){var i=a[n];if(i)try{i(e=JSON.parse(e))}catch(n){throw new Error("invoke: JSON字符串解析失败")}},r.notify=function(n,e){try{if(!n)return;var i=c[n];e=JSON.parse(e),i&&i(e.err,e.respData)}catch(n){throw new Error(n)}},r.debug=function(n){i=!!l(n)&&n(u)},r.wrap=n,window.JSApi=r;var L=function(){for(var n=document.getElementsByTagName("script"),e=null,i=void 0,t=0,o=n.length;t<o;t++)~(i=n[t].getAttribute("src")).indexOf("jsapi.")&&(e=i.substring(i.indexOf("?")+1))&&(e=e.split("&"));return e}();L&&L.length&&("_"!==L[0]&&"JSApi"!==L[0]&&function(n){if("JSApi"===n)return!1;window[n]=r,"JSApi"in window&&delete window.JSApi}.call(r,L[0]),2===L.length&&function(n){n&&(n in window||console.warn&&console.warn("不存在App注入的名称为"+n+"的JSContext上下文"),s=n)}.call(r,L[1]))}();